{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Main Section Start -->
		<div class="main-section">
			<div class="page-section restaurant-detail-image-section" 
     style="min-height: 400px; background: url({% if user_profile.cover_photo %}{{ user_profile.cover_photo.url }}{% else %}{% static 'extra-images/cover-photo01.jpg' %}{% endif %}) no-repeat center center / cover;">
     
     <!-- Container Start -->
     <div class="container">
         <!-- Row Start -->
         <div class="row">
             <!-- Column Start -->
             <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                 <div class="company-info-detail">
                     <div class="company-info">
                         <div class="img-holder">
                             <figure>
                                 {% if user_profile.profile_picture %}
                                     <img src="{{ user_profile.profile_picture.url }}" alt="Profile Picture">
                                 {% else %}
                                     <img src="{% static 'extra-images/listing-logo18.png' %}" alt="Default Profile">
                                 {% endif %}
                             </figure>
                         </div>
                         <div class="text-holder">
                             <span class="restaurant-title">{{ user.first_name }} {{ user.last_name }}</span>
                             <div class="text">
                                 <i class="icon-location"></i>
                                 <p>{{ user.phone_number|default:"No phone number" }}</p>
                             </div>
                             {% if user_profile.address %}
                             <div class="text">
                                 <i class="icon-location"></i>
                                 <p>{{ user_profile.address }}</p>
                             </div>
                             {% endif %}
                         </div>
                     </div>
                 </div>
             </div>
             <!-- Column End -->
         </div>
         <!-- Row End -->
     </div>
     <!-- Container End -->
</div>
			<div class="page-section account-header buyer-logged-in">
				<div class="container">
					<div class="row">
						<div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
							<!--load the sidebar here-->
							{% include 'includes/c_sidebar.html' %}
						</div>
						<div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
							<div class="user-dashboard loader-holder">
								<div class="user-holder">
									
									<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
										<div class="row">
											<div class="element-title has-border right-filters-row">
												<h5>Recent Orders</h5>
												<div class="right-filters row pull-right">
													<div class="col-lg-6 col-md-6 col-xs-6">
														<a href="{% url 'customer_my_orders' %}" class="btn btn-outline-primary btn-sm">
															<i class="fa fa-list"></i> View All Orders
														</a>
													</div>
												</div>
											</div>
										</div>
									</div>
									<div class="row">
										<div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
											<div class="user-orders-list">
												<div class="responsive-table">
													<ul class="table-generic">
														<li class="order-heading-titles">
															<div>Order ID</div>
															<div>Date</div>
															<div>Total Price</div>
															<div>Payment Method</div>
															<div>Status</div>
															<div>Action</div>
														</li>
														
														{% if recent_orders %}
															{% for order in recent_orders %}
															<li class="order-heading-titles">
																<div>
																	<a href="{% url 'order_detail' order.order_number %}" class="text-primary">
																		{{ order.order_number }}
																	</a>
																</div>
																<div>{{ order.created_at|date:"M d, Y" }}</div>
																<div>${{ order.total }}</div>
																<div>{{ order.payment_method }}</div>
																<div>
																	<span class="order-status 
																		{% if order.status == 'Accepted' %}bg-success
																		{% elif order.status == 'Cancelled' %}bg-danger
																		{% elif order.status == 'Completed' %}bg-info
																		{% else %}bg-warning{% endif %}">
																		{{ order.status }}
																	</span>
																</div>
																<div>
																	<a href="{% url 'order_detail' order.order_number %}" 
																	   class="btn btn-sm btn-outline-primary">
																		<i class="fa fa-eye"></i> View
																	</a>
																</div>
															</li>
															{% endfor %}
														{% else %}
															<li class="order-heading-titles">
																<div colspan="6" class="text-center py-4">
																	<p class="text-muted mb-0">No orders yet</p>
																	<a href="{% url 'marketplace' %}" class="btn btn-sm btn-primary mt-2">
																		<i class="fa fa-utensils"></i> Browse Restaurants
																	</a>
																</div>
															</li>
														{% endif %}
													</ul>

												</div>												
											</div>
										</div>
									</div>
									
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Main Section End -->


{% endblock %}